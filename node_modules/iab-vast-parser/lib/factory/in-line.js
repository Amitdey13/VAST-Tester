'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _iabVastModel = require('iab-vast-model');

var _ad = require('../inherit/ad');

var _ad2 = _interopRequireDefault(_ad);

var _category = require('./category');

var _category2 = _interopRequireDefault(_category);

var _survey = require('./survey');

var _survey2 = _interopRequireDefault(_survey);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

exports.default = function ($ad, options) {
  var inLine = new _iabVastModel.InLine();
  var $inLine = $ad.inLine;
  (0, _ad2.default)($ad, $inLine, inLine, options);
  inLine.adTitle = $inLine.adTitle != null ? $inLine.adTitle._value : null;
  if ($inLine.category != null) {
    var _inLine$categories;

    (_inLine$categories = inLine.categories).push.apply(_inLine$categories, _toConsumableArray($inLine.category.filter(function (c) {
      return c.authority != null;
    }) // Ignores declarations such as <Category/>.
    .map(_category2.default)));
  }
  inLine.description = $inLine.description != null ? $inLine.description._value : null;
  inLine.advertiser = $inLine.advertiser != null ? $inLine.advertiser._value : null;
  if ($inLine.survey != null) {
    var _inLine$surveys;

    (_inLine$surveys = inLine.surveys).push.apply(_inLine$surveys, _toConsumableArray($inLine.survey.filter(function (s) {
      return s._value.length > 0;
    }).map(_survey2.default)));
  }
  return inLine;
};